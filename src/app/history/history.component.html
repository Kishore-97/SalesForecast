<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div *ngIf="isSessionValid|async; else sessionExpired">
        <div fxLayoutAlign="center">
            <mat-card class="mat_card" style="margin-top:20px; margin-bottom: 10px;background: rgba(255, 255, 255, 0);">
                <div class="animate__animated animate__fadeIn animate__fast" style="text-align: center;">
                    <h1 class="animate_animated animate_delay-1s">History of Forecasts</h1>
                </div>
                <div class="animate__animated animate__fadeIn animate__fast">
                    <h2 class="animate_animated animate_delay-1s">Choose the forecast you want to revisit</h2>
                </div>
            </mat-card>
        </div>
        <div fxLayoutAlign="center center" class="animate__animated animate__fadeIn animate__delay-1s">
            <mat-card class="mat_card" style="height: 500px;overflow-y: scroll;">
                <table class="pure-table pure-table-bordered">
                    <tr class="pure-table-odd">
                        <th>Date of Forecast</th>
                        <th>Dataset Name</th>
                        <th>Target for Forecast</th>
                        <th>Forecasted Range</th>
                        <th>View Results</th>
                        <th>Delete Record</th>
                    </tr>
                    <tr *ngFor="let record of tabledata">
                        <td>{{record['date and time']}}</td>
                        <td>{{record['filename']}}</td>
                        <td>{{record['prediction_length']}}</td>
                        <td>{{record['target']}}</td>
                        <td><button (click)="viewRecord(record['date and time'])" class="pure-button-admin pure-button"
                                style="text-align: center;width: fit-content;">View
                                Results</button></td>
                        <td><button (click)="deleteRecord(record)" class="pure-button button-success"
                            style="text-align: center;width: fit-content;"><mat-icon>delete</mat-icon></button></td>
                    </tr>
                </table>
            </mat-card> 
        </div>
    </div>
    <ng-template #sessionExpired>
        <div fxLayoutAlign="center center" fxFlexFill>
            <mat-card>
                <div>
                    <h1>
                        Your Session has expired,
                        Please Login again.
                    </h1>
                </div>
                <div style="text-align: center;">
                    <button class="pure-button button-success" routerLink="/login">Login</button>
                </div>
            </mat-card>
        </div>
    </ng-template>
</body>

<!-- <div class="pure-u-1-2" style="width: fit-content;">
    <p class="username">{{username}}</p>
</div> -->